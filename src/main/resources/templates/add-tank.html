<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title th:text="@{'Login - ' + ${@customSiteProperties.siteName}}"></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<style>
.form-error {
	color: red;
}

.empty-table-alert {
	color: red;
	font-size: 20px;
	text-align: center;
}

.tank-table-row {
	width: 100px;
}

.tank-align-center {
	text-align: center;
}

.tank-row td {
	white-space: nowrap;
}

.form-error {
	color: red;
	font-style: italic;
}

.increased-size {
	font-size: 125%;
	fon
}

.new-tank-row {
	white-space: nowrap;
}

new-tank-errors {
	padding: 0px;
	margin: 0px;
	border-collapse: collapse;
	font-color: red;
}

.new-tank-errors td {
	vertical-align: top;
}

.new-tank-errors td p {
	padding: 0px;
	margin: 0px;
}

#water-change-col {
	width: 200px;
}

#add-tank-row {
	color: red;
	colspan: 4;
}

#add-tank-button {
	
}
</style>
</head>

<body>
  <div id="welcome">
    <h2 th:text="'Welcome, ' + ${user?.firstName}">Hello</h2>
  </div>

  <div id="tank-table">

    <form th:if="${newTank != null && user != null}"
      th:object="${newTank}" th:action="@{/home/add-tank}" method="POST"
    >

      <!-- Tank Name taken -->
      <p class="form-error increased-size"
        th:if="${#fields.hasErrors('global')}" th:errors="*{global}"
      ></p>
      <table>
        <thead>
          <tr>
            <th class="tank-table-row">Name</th>
            <th class="tank-table-row">Size</th>
            <th class="tank-table-row">Location</th>
            <th class="tank-table-row" id="water-change-col">Number
              of Water Changes</th>
          </tr>
        </thead>
        <tbody>

          <!-- List Tanks -->
          <tr th:each="tank : ${user.tanks}" class="tank-row">
            <td th:text="${tank.name}"></td>
            <td th:text="${tank.size}" class="tank-align-center"></td>
            <td th:text="${tank.location}"></td>
            <td
              th:text="${tank.waterChanges == null ? 0 : tank.waterChanges.size()}"
              class="tank-align-center"
            ></td>
          </tr>

          <!-- New Tank to Add -->
          <tr class="new-tank-row">

            <td><input th:field="*{name}" placeholder="Tank's Name" />
            </td>
            <td><input th:field="*{size}"
              placeholder="Tank's Size (no units)"
            /></td>
            <td><input th:field="*{location}"
              placeholder="Tank's Location"
            /></td>
            <td><input type=hidden th:field="${user.id}"
              th:value="${user.id}"
            />
              <button type="submit">Submit</button> <input type="hidden"
              th:value="${user.firstName}" th:field="${user.firstName}"
            /><input type="hidden" th:value="${user.tanks}"
              th:field="${user.tanks}"
            /><input type="hidden" th:field="*{id}" th:value="*{id}" /></td>
          </tr>

          <!-- Tank add Errors -->
          <tr th:if="${#fields.hasErrors('*')}" class="new-tank-errors">
            <td><p class="form-error"
                th:if="${#fields.hasErrors('name')}" th:errors="*{name}"
              ></p></td>

            <td>
              <p class="form-error" th:if="${#fields.hasErrors('size')}"
                th:errors="*{size}"
              ></p>
            </td>

            <td><p class="form-error"
                th:if="${#fields.hasErrors('location')}"
                th:errors="*{location}"
              ></p></td>
          </tr>
        </tbody>
      </table>
    </form>
  </div>
</body>
</html>